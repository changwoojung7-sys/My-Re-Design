import { useState, useEffect } from 'react';

type Language = 'en' | 'ko';

export const translations = {
    en: {
        // My Page
        focusArea: "Focus Area",
        plan: "Plan",
        started: "Started",
        viewOnly: "View Only",
        editing: "Editing",
        mainGoal: "Main Goal",
        duration: "Duration",
        month: "Month",
        months: "Months",
        saveDesign: "Save Design",
        saving: "Saving...",
        deletePlan: "Delete Plan",
        // Categories
        health: "Health",
        growth: "Growth",
        mindset: "Mindset",
        career: "Career",
        social: "Social",
        vitality: "Vitality",
        // Form Labels
        height: "Height (cm)",
        weight: "Weight (kg)",
        growthTopic: "Topic (e.g. Reading, Coding)",
        currentLevel: "Current Level",
        targetLevel: "Target Level",
        projectName: "Project Name",
        kpi: "Key Outcome (KPI)",
        currentMood: "Current Mood / State",
        affirmation: "Daily Affirmation",
        socialPeople: "Person to connect with",
        socialActivity: "Activity (e.g. Call, Meet)",
        vitalityHobby: "Hobby / Interest",
        vitalityRoutine: "Routine to build",
        description: "Details...",
        whatToAchieve: "What do you want to achieve?",

        // Today (Mission)
        missionOverview: "Mission Overview",
        generateNewMissions: "Generate New Missions",
        generating: "Generating...",
        complete: "Complete",
        verify: "Verify",
        inProgress: "In Progress",
        emptyStateTitle: "Start your mission!",
        emptyStateDesc: "Small achievements today lead to changes tomorrow.\nShall we start right now?",
        createGoal: "Go to Set Goals",
        newMissionProposal: "New Mission Proposal",
        reviewCarefully: "Review carefully before accepting",
        confirmAndStart: "Confirm & Start",
        changeMissions: "Change Missions ({n} left)",

        // Growth (Dashboard)
        // growth: "Growth", // Duplicated
        totalMissions: "Total Missions",
        successRate: "Success Rate",
        currentStreak: "Current Streak",
        aiCoach: "AI Coach",

        // Friends
        addFriend: "Add Friend",
        searchPlaceholder: "Phone or Email",
        readyToStart: "Ready to start...",
        missions: "Missions",
        progress: "Progress",

        // Subscription
        paywallTitle: "Unlock Your Potential",
        paywallSubtitle: "Continue your journey with CoreLoop Premium",
        paywallWarningTitle: "Free Trial Ended",
        paywallWarningDesc1: "Missions are free up to Day 4.",
        paywallWarningDesc2: "From Day 5, a subscription is required to continue.",
        maybeLater: "Maybe Later",
        subscribe: "Subscribe",
        freeTrialEnded: "Your All free trial has ended.",
        subscribeNow: "Subscribe Now",
        plan1Month: "1 Month",
        plan3Months: "3 Months",
        plan6Months: "6 Months",
        plan12Months: "12 Months",
        savePercent: "Save",
        price1Month: "₩4,900",
        price3Months: "₩12,900",
        price6Months: "₩19,900",
        price12Months: "₩29,900",
        restorePurchase: "Restore Purchase",
        manageSubscription: "Manage Subscription",
        subscriptionStatus: "Subscription Status",
        currentPlan: "Current Plan",
        expiresOn: "Expires On",
        cancelSubscription: "Cancel Subscription",
        active: "Active",
        expired: "Expired",
        terms: "Terms",
        privacy: "Privacy",
        challengeCount: "Challenge {n}",
        locked: "Locked",
        subscribeToUnlock: "Subscribe to unlock this mission category and start your journey.",
        unlockNow: "Unlock Now",
        missionPlan: "Mission Plan",
        allAccessPlan: "All Access Plan",
        currentStatusFor: "Current Status for",
        unlockedPremium: "Unlocked Premium",
        missionSubscribed: "Mission Subscribed",
        freeRestricted: "Free Restricted",
        expires: "Expires",
        unlocksMissionOnly: "Unlocks premium features only for {category} missions.",
        unlocksAllAccess: "Unlocks premium features for ALL categories and future updates.",
        noPaymentHistory: "No payment history found.",
        paymentHistory: "Payment History",
        paymentDate: "Payment Date",
        cancelPayment: "Cancel Payment",
        cancelled: "Cancelled",
        cancelConfirm: "Are you sure you want to cancel this payment?",
        cancelSuccess: "Payment cancelled.",
        cancelDate: "Cancelled Date",
        onlyTodayCancel: "Only payments made today can be cancelled.",
        subscribeConfirm: "Subscribe to {target} for {months} months at {price}?",
        subscriptionSuccessful: "Subscription successful!",
        subscriptionFailed: "Failed to subscribe: {error}",



        // Date Helpers
        day: "Day",
        today: "Today",
        tomorrow: "Tomorrow",

        // Dashboard specific
        analysisTarget: "Analysis Target",
        performanceTrend: "Performance Trend",
        week: "Week",
        month_label: "Month",
        overall: "Overall",

        // Login & Onboarding
        appTitle: "My Re Design", // Brand name usually not translated, but consistent key
        appSubtitle: "Reconnect your daily rhythm.",
        myLoopSubtitle: "Small challenges that awaken your daily life",
        login: "Login",
        loginId: "LOGIN ID",
        email: "Email",
        phone: "Phone",
        password: "Password",
        noAccount: "Don't have an account?",
        createAccount: "Create a new account",
        guestLogin: "Enter as Guest (MVP Demo)",

        // OTP / Auth
        codeSent: "Verification code sent!",
        verifyCode: "Verification Code",
        sendCode: "Send Verification Code",
        verifyAuth: "Verify & Login",
        verifyIdentity: "Verify Identity",
        verificationRequired: "For your security, please verify your identity to proceed.",

        // Account Settings
        accountSettings: "Account Settings",
        emailAuth: "Email Authentication",
        nickname: "NICKNAME",
        age: "AGE",
        gender: "GENDER",
        backupPhone: "BACKUP PHONE",
        backupEmail: "BACKUP EMAIL",
        addRecoveryEmail: "Add recovery email",
        addRecoveryPhone: "Add recovery phone",
        changePassword: "Change Password",
        currentPassword: "Current Password",
        newPassword: "New Password",
        confirmNewPassword: "Confirm New Password",
        updatePassword: "Update Password",
        saveChanges: "Save Changes",
        security: "SECURITY",

        // Friend History Notification
        accessRequests: "Access Requests",
        allCaughtUp: "All caught up!",
        noPendingRequests: "No pending requests.",
        activeAccess: "Active Access (Friends)",
        noActiveAccess: "No active access granted.",
        revoke: "Revoke",
        wantsToViewHistory: "{category} history requested by",
        history: "history",
        approve: "Approve",
        reject: "Reject",
        approved: "Approved",
        rejected: "Rejected",
        pending: "Pending",
        sharePrompt: "Share missions with friends, family, and colleagues!",
        unknownUser: "Unknown User",
        unknownCategory: "Unknown",
        historyAccessLog: "History Access Log",

        // Account Deletion
        deleteAccount: "Delete Account",
        deleteAccountConfirm1: "Are you sure you want to delete your account?",
        deleteAccountConfirm2: "This action is irreversible. All data will be deleted (Friends, Goals, Missions).\n\nOnly your subscription/payment history and email will be archived for administrative purposes.\n\nProceed?",
        accountDeleted: "Account deleted. Goodbye.",
        deleteAccountFailed: "Failed to delete account: {error}",

        // Alerts & Confirmations
        alertApproveFail: "Failed to approve.",
        alertSettingsSavedPhoneExcluded: "Settings saved, but phone number could not be linked because it is already used by another account.",
        alertSettingsUpdated: "Settings updated!",
        alertSettingsFail: "Failed to update settings.",
        alertProfileImgUpdated: "Profile image updated!",
        alertProfileImgFail: "Failed to upload profile image.",
        alertFillPassword: "Please fill in all password fields.",
        alertPasswordMismatch: "New passwords do not match.",
        alertPasswordLength: "Password must be at least 6 characters.",
        alertPasswordIncorrect: "Current password is incorrect.",
        alertPasswordUpdated: "Password updated successfully!",
        alertPasswordUpdateFail: "Failed to update password.",
        alertNoEmail: "No email found for verification.",
        alertCodeSent: "Verification code sent to your email!",
        alertNextChallenge: "Next challenge started!",
        alertDesignSaved: "Design saved successfully!",
        alertSaveGoalFail: "Failed to save goal!",
        confirmDeletePlan: "Are you sure you want to delete this plan?",
        confirmDeletePlanWarning: "WARNING: This will permanently delete all your progress, daily missions, and social interactions for this goal. \n\nThis action cannot be undone. Do you really want to proceed?",
        alertPlanDeleted: "Plan deleted successfully.",
        alertDeletePlanFail: "Failed to delete plan: {error}",


    },
    ko: {
        // My Page
        focusArea: "집중 영역",
        plan: "계획",
        started: "시작일",
        viewOnly: "조회 모드",
        editing: "수정 모드",
        mainGoal: "최종 목표",
        duration: "기간",
        month: "개월",
        months: "개월",
        saveDesign: "설계 저장",
        saving: "저장 중...",
        deletePlan: "계획 삭제",
        // Categories
        health: "건강",
        growth: "성장",
        mindset: "마인드",
        career: "커리어",
        social: "소셜",
        vitality: "일상",
        // Form Labels
        height: "키 (cm)",
        weight: "몸무게 (kg)",
        growthTopic: "주제 (예: 독서, 코딩)",
        currentLevel: "현재 수준",
        targetLevel: "목표 수준",
        projectName: "프로젝트명",
        kpi: "핵심 성과 (KPI)",
        currentMood: "현재 기분/상태",
        affirmation: "나에게 해줄 말 (확언)",
        socialPeople: "함께할 사람 (연락 대상)",
        socialActivity: "활동 (예: 전화, 만남)",
        vitalityHobby: "취미 / 관심사",
        vitalityRoutine: "만들고 싶은 루틴",
        description: "상세 내용...",
        whatToAchieve: "무엇을 이루고 싶으신가요?",

        // Today (Mission)
        missionOverview: "미션 개요",
        generateNewMissions: "새 미션 생성",
        generating: "생성 중...",
        complete: "완료",
        verify: "인증하기",
        inProgress: "진행 중",
        emptyStateTitle: "미션을 시작해보세요!",
        emptyStateDesc: "오늘의 작은 성취가 내일의 변화를 만듭니다.\n지금 바로 시작해볼까요?",
        createGoal: "목표 설정하러 가기",
        newMissionProposal: "새 미션 제안",
        reviewCarefully: "수락하기 전에 꼼꼼히 확인하세요",
        confirmAndStart: "확인 및 시작",
        changeMissions: "미션 변경 ({n}회 남음)",

        // Growth (Dashboard)
        // growth: "성장", // Duplicated
        totalMissions: "총 미션",
        successRate: "성공률",
        currentStreak: "연속 달성",
        aiCoach: "AI 코치",

        // Friends
        addFriend: "친구 추가",
        searchPlaceholder: "전화번호 또는 이메일",
        readyToStart: "시작 준비 중...",
        missions: "미션",
        progress: "진행도",

        // Subscription
        paywallTitle: "잠재력을 깨우세요",
        paywallSubtitle: "CoreLoop 프리미엄으로 여정을 계속하세요",
        paywallWarningTitle: "무료 체험 종료",
        paywallWarningDesc1: "미션은 4일차까지 무료로 제공됩니다.",
        paywallWarningDesc2: "5일차부터는 구독을 통해 여정을 계속할 수 있습니다.",
        maybeLater: "다음에 하기",
        subscribe: "구독하기",
        freeTrialEnded: "모두 무료 체험이 종료되었습니다.",
        subscribeNow: "구독하기",
        plan1Month: "1개월",
        plan3Months: "3개월",
        plan6Months: "6개월",
        plan12Months: "12개월",
        savePercent: "절약",
        price1Month: "₩4,900",
        price3Months: "₩12,900",
        price6Months: "₩19,900",
        price12Months: "₩29,900",
        restorePurchase: "구매 복원",
        manageSubscription: "구독 관리",
        subscriptionStatus: "구독 상태",
        currentPlan: "현재 플랜",
        expiresOn: "만료일",
        cancelSubscription: "구독 취소",
        active: "활성",
        expired: "만료됨",
        terms: "이용약관",
        privacy: "개인정보처리방침",
        challengeCount: "{n}차 도전",
        locked: "잠김",
        subscribeToUnlock: "이 카테고리의 미션을 시작하려면 구독이 필요합니다.",
        unlockNow: "지금 잠금 해제",
        missionPlan: "미션 플랜",
        allAccessPlan: "전체 이용 플랜",
        currentStatusFor: "현재 상태:",
        unlockedPremium: "프리미엄 (해금됨)",
        missionSubscribed: "미션별 구독중",
        freeRestricted: "무료 (제한됨)",
        expires: "만료일",
        unlocksMissionOnly: "오직 {category} 미션의 프리미엄 기능을 해금합니다.",
        unlocksAllAccess: "모든 카테고리와 향후 업데이트의 프리미엄 기능을 해금합니다.",
        noPaymentHistory: "결제 내역이 없습니다.",
        paymentHistory: "결제 이력",
        paymentDate: "결제일자",
        cancelPayment: "결제 취소",
        cancelled: "취소됨",
        cancelConfirm: "이 결제를 취소하시겠습니까?",
        cancelSuccess: "결제가 취소되었습니다.",
        cancelDate: "취소일자",
        onlyTodayCancel: "당일 결제만 취소 가능합니다.",
        subscribeConfirm: "{target}을(를) {months}개월 동안 {price}에 구독하시겠습니까?",
        subscriptionSuccessful: "구독이 완료되었습니다!",
        subscriptionFailed: "구독 실패: {error}",



        // Date Helpers
        day: "일차",
        today: "오늘",
        tomorrow: "내일",

        // Dashboard specific
        analysisTarget: "분석 대상",
        performanceTrend: "수행 추이",
        week: "주간",
        month_label: "월간", // using month_label to avoid conflict with 'month' (month duration)
        overall: "전체",

        // Login & Onboarding
        appTitle: "My Re Design",
        appSubtitle: "일상의 리듬을 다시 찾으세요.",
        myLoopSubtitle: "나의 일상을 깨우는 작은 도전들",
        login: "로그인",
        loginId: "로그인 ID",
        email: "이메일",
        phone: "휴대전화",
        password: "비밀번호",
        noAccount: "계정이 없으신가요?",
        createAccount: "새 계정 만들기",
        guestLogin: "게스트로 입장 (MVP 데모)",

        // OTP / Auth
        codeSent: "인증번호가 발송되었습니다!",
        verifyCode: "인증번호",
        sendCode: "인증번호 발송",
        verifyAuth: "확인 및 로그인",
        verifyIdentity: "본인 인증",
        verificationRequired: "보안을 위해 본인 인증이 필요합니다.",

        // Account Settings
        accountSettings: "계정 설정",
        emailAuth: "이메일 인증",
        nickname: "닉네임",
        age: "나이",
        gender: "성별",
        backupPhone: "비상 연락처",
        backupEmail: "비상 이메일",
        addRecoveryEmail: "복구 이메일 추가",
        addRecoveryPhone: "복구 전화번호 추가",
        changePassword: "비밀번호 변경",
        currentPassword: "현재 비밀번호",
        newPassword: "새 비밀번호",
        confirmNewPassword: "새 비밀번호 확인",
        updatePassword: "비밀번호 변경하기",
        saveChanges: "변경사항 저장",
        security: "보안",

        // Friend History Notification
        accessRequests: "요청 알림",
        allCaughtUp: "새로운 알림이 없습니다!",
        noPendingRequests: "대기 중인 요청이 없습니다.",
        activeAccess: "활성 권한 (친구)",
        noActiveAccess: "부여된 권한이 없습니다.",
        revoke: "철회",
        wantsToViewHistory: "님이 회원님의",
        history: "기록을 보고 싶어합니다.",
        approve: "수락",
        reject: "거절",
        approved: "승인됨",
        rejected: "거절됨",
        pending: "대기 중",
        sharePrompt: "친구.가족.동료들과 미션을 함께하면서 공유해 보세요!",
        unknownUser: "알 수 없는 사용자",
        unknownCategory: "알 수 없음",
        historyAccessLog: "히스토리 접근 로그",

        // Account Deletion
        deleteAccount: "회원 탈퇴",
        deleteAccountConfirm1: "정말로 계정을 삭제하시겠습니까?",
        deleteAccountConfirm2: "이 작업은 되돌릴 수 없습니다. 친구, 목표, 미션 등 모든 데이터가 삭제됩니다.\n\n구독 및 결제 내역과 이메일 정보만 관리 목적으로 보관됩니다.\n\n진행하시겠습니까?",
        accountDeleted: "계정이 삭제되었습니다. 이용해 주셔서 감사합니다.",
        deleteAccountFailed: "계정 삭제 실패: {error}",

        // Alerts & Confirmations
        alertApproveFail: "승인에 실패했습니다.",
        alertSettingsSavedPhoneExcluded: "설정은 저장되었으나, 이미 다른 계정에서 사용 중인 번호라 연동되지 않았습니다.",
        alertSettingsUpdated: "설정이 업데이트되었습니다!",
        alertSettingsFail: "설정 업데이트에 실패했습니다.",
        alertProfileImgUpdated: "프로필 이미지가 변경되었습니다!",
        alertProfileImgFail: "프로필 이미지 업로드 실패.",
        alertFillPassword: "모든 비밀번호 필드를 입력해주세요.",
        alertPasswordMismatch: "새 비밀번호가 일치하지 않습니다.",
        alertPasswordLength: "비밀번호는 6자 이상이어야 합니다.",
        alertPasswordIncorrect: "현재 비밀번호가 올바르지 않습니다.",
        alertPasswordUpdated: "비밀번호가 변경되었습니다!",
        alertPasswordUpdateFail: "비밀번호 변경 실패.",
        alertNoEmail: "인증할 이메일을 찾을 수 없습니다.",
        alertCodeSent: "이메일로 인증 코드가 발송되었습니다!",
        alertNextChallenge: "다음 챌린지가 시작되었습니다!",
        alertDesignSaved: "설계가 저장되었습니다!",
        alertSaveGoalFail: "목표 저장 실패!",
        confirmDeletePlan: "이 계획을 삭제하시겠습니까?",
        confirmDeletePlanWarning: "경고: 이 계획과 관련된 모든 진행 상황, 미션, 좋아요/댓글 기록이 영구적으로 삭제됩니다. 복구할 수 없습니다.\n\n계속하시겠습니까?",
        alertPlanDeleted: "계획이 삭제되었습니다.",
        alertDeletePlanFail: "계획 삭제 실패: {error}",


    }
};

export function useLanguage() {
    const [language, setLanguage] = useState<Language>('en');

    useEffect(() => {
        const browserLang = navigator.language.split('-')[0];
        if (browserLang === 'ko') {
            setLanguage('ko');
        } else {
            setLanguage('en');
        }
    }, []);

    return {
        language,
        t: translations[language],
        isKo: language === 'ko'
    };
}
